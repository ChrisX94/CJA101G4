<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>æœƒå“¡è³‡æ–™ä¿®æ”¹</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <style type="text/css">
        .error {
            color: red;
            font-size: 12px;
        }

        .form-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .auth-checkbox {
            margin: 5px 10px;
        }
    </style>
</head>

<body class="bg-light">

    <nav class="navbar navbar-expand-md navbar-dark bg-success fixed-top justify-content-center">
        <div align="center">
            <h2>æœƒå“¡è³‡æ–™ä¿®æ”¹</h2>
            <h3>
                <a class="navbar-brand" th:href="@{/adm/select_page}"><span style="font-size:1.5em;">ğŸ”™</span> å›æŸ¥è©¢é </a>
                <a class="navbar-brand" th:href="@{/adm/adminHome}" style="margin-left: 20px;">ğŸ  å›ç®¡ç†å“¡é¦–é </a>
            </h3>
        </div>
    </nav>

    <div class="container mt-5 pt-5">
        <div class="form-container">
            <div class="card shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h4 class="mb-0">âœï¸ ä¿®æ”¹æœƒå“¡è³‡æ–™</h4>
                </div>
                <div class="card-body">
                    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

                    <form th:action="@{/adm/updateProfile}" method="post" th:object="${userUpdate}">
                        <!-- æœƒå“¡ID (ç•«é¢é¡¯ç¤ºç”¨ï¼Œreadonly) -->
                        <div class="mb-3">
                            <label class="form-label">æœƒå“¡ID:</label>
                            <input type="text" th:value="*{userId}" class="form-control" readonly
                                style="background-color: #f8f9fa;">
                        </div>

                        <!-- éš±è—æ¬„ä½ï¼Œå¯¦éš›é€å‡ºç”¨ -->
                        <input type="hidden" th:field="*{userId}" />



                        <!-- æœƒå“¡åç¨±-->
                        <div class="mb-3">
                            <label class="form-label">æœƒå“¡åç¨±: <span class="text-danger">*</span></label>
                            <input type="text" th:field="*{username}" class="form-control"
                                onclick="hideContent('username.errors');" />
                            <span th:if="${#fields.hasErrors('username')}" th:errors="*{username}" class="error"
                                id="username.errors"></span>
                        </div>

                        <!-- æœƒå“¡Email (å”¯è®€) -->
                        <div class="mb-3">
                            <label class="form-label">Email:</label>
                            <input type="text" th:field="*{email}" class="form-control" readonly
                                style="background-color: #f8f9fa;">
                        </div>
                        <!-- æ€§åˆ¥-->
                        <div class="mb-3">
                            <label class="form-label">æ€§åˆ¥ <span class="text-danger">*</span></label>
                            <div class="mt-2 d-flex gap-3">
                                <label class="form-check-inline">
                                    <input type="radio" th:field="*{gender}" value="0" class="form-radio-input">
                                    <span class="form-option-text">ç”·</span>
                                </label>
                                <label class="form-check-inline">
                                    <input type="radio" th:field="*{gender}" value="1" class="form-radio-input">
                                    <span class="form-option-text">å¥³</span>
                                </label>
                            </div>
                            <span th:if="${#fields.hasErrors('gender')}" th:errors="*{gender}"
                                class="text-danger small d-block mt-1"></span>
                        </div>

                        <!-- å‡ºç”Ÿæ—¥æœŸ-->
                        <div class="mb-3">
                            <label class="form-label">å‡ºç”Ÿæ—¥æœŸ: <span class="text-danger">*</span></label>
                            <input type="date" th:field="*{birthday}" class="form-control"
                                onclick="hideContent('birthday.errors');" />
                            <span th:if="${#fields.hasErrors('birthday')}" th:errors="*{birthday}" class="error"
                                id="birthday.errors"></span>
                        </div>

                        <!-- å±…ä½å€åŸŸ-->
                        <div class="mb-3">
                            <label class="form-label">å±…ä½å€åŸŸ: <span class="text-danger">*</span></label>
                            <input type="text" th:field="*{location}" class="form-control"
                                onclick="hideContent('location.errors');" />
                            <span th:if="${#fields.hasErrors('location')}" th:errors="*{location}" class="error"
                                id="location.errors"></span>
                        </div>

                        <!--é—œæ–¼æˆ‘-->
                        <div class="mb-3">
                            <label class="form-label">é—œæ–¼æˆ‘: <span class="text-danger">*</span></label>
                            <input type="text" th:field="*{intro}" class="form-control"
                                onclick="hideContent('intro.errors');" />
                            <span th:if="${#fields.hasErrors('intro')}" th:errors="*{intro}" class="error"
                                id="intro.errors"></span>
                        </div>

                        <!-- å¸³è™Ÿç‹€æ…‹è¨­å®š -->
                        <div class="mb-3">
                            <label class="form-label">å¸³è™Ÿç‹€æ…‹:</label>
                            <div class="form-check">
                                <input type="radio" th:field="*{userStatus}" class="form-check-input" value="1"
                                    id="statusNormal">
                                <label class="form-check-label" for="statusNormal">ä¸€èˆ¬æœƒå“¡ï¼ˆå¯ç™»å…¥ï¼‰</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" th:field="*{userStatus}" class="form-check-input" value="2"
                                    id="statusSuspended">
                                <label class="form-check-label" for="statusSuspended">åœæ¬Š</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" th:field="*{userStatus}" class="form-check-input" value="3"
                                    id="statusDeleted">
                                <label class="form-check-label" for="statusDeleted">è¨»éŠ·</label>
                            </div>
                        </div>


                        <!-- æŒ‰éˆ•å€åŸŸ -->
                        <div class="d-flex justify-content-between">
                            <a th:href="@{/adm/listAllUser}" class="btn btn-secondary">ğŸ”™ è¿”å›åˆ—è¡¨</a>
                            <button type="submit" class="btn btn-warning">ğŸ’¾ é€å‡ºä¿®æ”¹</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script type="text/javascript">
        // æ¸…é™¤æç¤ºä¿¡æ¯
        function hideContent(elementId) {
            var element = document.getElementById(elementId);
            if (element) {
                element.style.display = "none";
            }
        }

        // é˜²æ­¢ç€è¦½å™¨å¿«å–
        window.onpageshow = function (event) {
            if (event.persisted) {
                window.location.reload();
            }
        };
    </script>

</body>

</html>