<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Expires" content="0">
	<title>ç®¡ç†å“¡é¦–é </title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		.card-header.bg-lightblue {
			background-color: #d0e7ff;
			/* æ·¡è—è‰² */
			color: #0d6efd;
			/* Bootstrap primary è—è‰²å­— */
			font-weight: bold;
		}
	</style>
</head>

<body class="bg-light">

	<div class="container mt-5">
		<!-- ç™»å‡ºæŒ‰éˆ• -->
		<div class="text-end mb-3">
			<a th:href="@{/adm/logout}" class="btn btn-outline-danger">
				ğŸšª ç™»å‡º
			</a>
		</div>

		<div class="text-center mb-4">
			<h1 class="fw-bold text-primary" th:if="${loggedInAdm != null}">
				æ­¡è¿å›ä¾†ï¼Œ<span th:text="${loggedInAdm.admName}">ç®¡ç†å“¡</span> ğŸ‘‹
			</h1>
			<h1 class="fw-bold text-secondary" th:unless="${loggedInAdm != null}">
				æ­¡è¿å›ä¾†ï¼Œç®¡ç†å“¡ ğŸ‘‹
			</h1>
		</div>

		<div class="row justify-content-center">
			<div class="col-md-8">

				<!-- æœ€é«˜ç®¡ç†å“¡å€å¡Š -->
				<div class="card shadow-sm border-primary mb-4" th:if="${isSuperAdmin}">
					<div class="card-header bg-lightblue">
						<h4 class="mb-0">æ‚¨æ˜¯æœ€é«˜ç®¡ç†å“¡ âœ¨</h4>
					</div>
					<div class="card-body">
						<ul class="list-group list-group-flush">
							<li class="list-group-item">
								<a th:href="@{/adm/select_page}" class="text-decoration-none">ğŸ” ç®¡ç†æ‰€æœ‰å¸³è™Ÿ</a>
							</li>
							<li class="list-group-item">
								<a th:href="@{/adm/addAdm}" class="text-decoration-none">â• æ–°å¢ç®¡ç†å“¡</a>
							</li>
							<li class="list-group-item">
								<a th:href="@{/report/list}" class="text-decoration-none">ğŸ“„ æª¢èˆ‰ç®¡ç†</a>
							</li>
							<li class="list-group-item">
								<a th:href="@{/api/admin/notifications/templates-page}" class="text-decoration-none">ğŸ””
									é€šçŸ¥ç¯„æœ¬ç®¡ç†</a>
							</li>
							<li class="list-group-item">
								<a th:href="@{/api/admin/notifications/manage-page}" class="text-decoration-none">ğŸš€
									é€šçŸ¥ç™¼é€ç®¡ç†</a>
							</li>
							<li class="list-group-item">
								<a th:href="@{/api/admin/notifications/report/page}" class="text-decoration-none">ğŸ“Š
									é€šçŸ¥æˆæ•ˆå ±å‘Š</a>
							</li>
						</ul>
					</div>
				</div>

				<!-- ä¸€èˆ¬ç®¡ç†å“¡å€å¡Š -->
				<div class="card shadow-sm border-primary" th:unless="${isSuperAdmin}">
					<div class="card-header bg-primary text-white">
						<h4 class="mb-0">æ‚¨æ˜¯ä¸€èˆ¬ç®¡ç†å“¡ ğŸ§‘â€ğŸ’¼</h4>
					</div>
					<div class="card-body">
						<ul class="list-group list-group-flush">
							<li class="list-group-item">
								<a th:href="@{/report/list}" class="text-decoration-none">ğŸ“„ æª¢èˆ‰ç®¡ç†</a>
							</li>
						</ul>
					</div>
				</div>

			</div>
		</div>
	</div>

	<!-- é˜²æ­¢ç€è¦½å™¨è¿”å›æŒ‰éˆ•é¡¯ç¤ºå¿«å–å…§å®¹çš„ JavaScript -->
	<script>
		console.log('adminHome.html loaded');

		// é˜²æ­¢ç€è¦½å™¨å¿«å–
		window.onpageshow = function (event) {
			console.log('pageshow event:', event.persisted);
			if (event.persisted) {
				console.log('Reloading due to persisted cache');
				window.location.reload();
			}
		};

		// é˜²æ­¢ç€è¦½å™¨è¿”å›æŒ‰éˆ•
		window.addEventListener('pageshow', function (event) {
			console.log('pageshow listener:', event.persisted);
			if (event.persisted) {
				console.log('Reloading due to persisted cache in listener');
				window.location.reload();
			}
		});

		// ä¿®æ”¹ï¼šç§»é™¤å¯èƒ½å°è‡´æ„å¤–è·³è½‰çš„pagehideäº‹ä»¶
		// window.addEventListener('pagehide', function (event) {
		// 	if (!event.persisted) {
		// 		window.location.replace(window.location.href);
		// 	}
		// });

		console.log('adminHome.html scripts loaded successfully');
	</script>

</body>

</html>